% !TEX TS-program = xelatex
% !TEX encoding = UTF-8 Unicode


\documentclass[a4paper]{article}

\usepackage[utf8]{inputenc}
\usepackage[a4paper, margin=1in]{geometry}
\usepackage{fontspec}
\usepackage[UKenglish]{datetime}
\usepackage{parskip}
\usepackage{hyperref}
\usepackage{enumitem}
\usepackage{fancyvrb}
\usepackage{listings}
\usepackage{xcolor}
\usepackage{xparse}
\usepackage{scrextend}
\usepackage{fancyhdr}
\usepackage{xcolor}


\setmainfont{SF Pro Text}
\setsansfont{SF Pro Text}
\setmonofont{SF Mono}

\hypersetup{
    colorlinks=true,
    linkcolor=blue,
    filecolor=magenta,
    urlcolor=blue,
}
\urlstyle{same}

\lstset{
    basicstyle=\ttfamily\footnotesize,
    keywordstyle=\color{blue}\ttfamily,
    stringstyle=\color{red}\ttfamily,
    commentstyle=\color{olive}\ttfamily,
    morecomment=[l][\color{magenta}]{\#}
}

\setlist[description]{leftmargin=\parindent,labelindent=\parindent}

\pagestyle{fancy}
\fancyhead[L]{CSC371 21/22: Summative Coursework}
\fancyhead[R]{Dr Martin Porcheron}
\fancyfoot[C]{\thepage}

\fancypagestyle{plain}{
\fancyhf{}
\fancyhead[L]{CSC371 Advanced OOP 21/22}
\fancyfoot[C]{\thepage}
}

\newcommand\qimarks[1]{\textbf{[#1 \ifthenelse{\equal{#1}{\string 1}}{mark}{marks}]}}
\newcommand\qmarks[1]{{\par\vspace{.3cm}\rightline{\qimarks{#1}\vspace{.5cm}}}}

\nonfrenchspacing

\title{Summative Coursework: 371pass}
\author{Dr Martin Porcheron}
\date{}
\newcommand\autograderlink{\href{https://csautograder.swansea.ac.uk/}{CS Autograder}}
\newcommand\submissionlink{\href{https://csautograder.swansea.ac.uk/web/project/31}{the CS Autograder submission page}}
\newcommand\mysubmissionsurl{https://csautograder.swansea.ac.uk/web/project/31?current_tab=my_submissions}
\newcommand\totalmarks{{100} }

\hyphenpenalty 10000
\exhyphenpenalty 10000


\begin{document}

\maketitle


You must submit your coursework by the due date listed on Canvas and CS Autograder at \textbf{11:59pm} to \textbf{\submissionlink{}} (not Canvas!). Feedback for your final submission will be provided by email to your university email address.

You can submit to Autograder a maximum of 10 times per day. Note that the results from Autograder may take a while to generate, especially if there are many simultaneous submissions, thus you are strongly discouraged from making last‑minute changes and submissions just before the deadline. We will only take the last submission to Autograder, thus if you submit close to the deadline, your results may come after the deadline and may be lower if you broke something!

\textbf{Please test that \autograderlink{} works for you now} by uploading the coursework framework. Some users occasionally encounter system errors with Autograder that seem to be caused by cookies. If this happens to you, try logging into Autograder in a private browsing/incognito window.

This coursework is worth \totalmarks{} marks and equates to 20\% of your module grade.

Please read this entire document from start to finish before beginning to work on this assignment and before asking questions about the coursework. If anything is ambiguous or unclear, then you should seek clarification by posting in the \href{https://canvas.swansea.ac.uk/courses/24793/discussion_topics/217912}{Canvas group discussions for the coursework}.





\section*{Unfair Practice Declaration}\label{sec:unfair-practice}
The university takes all cases of unfair practice seriously. The code you produce for this assignment \textbf{must be your own original work}. Do not submit any code copied from your peers, from the Internet, or from anyone else, as your own. Likewise, \textbf{do not share your code} with anyone, including sharing or posting \textbf{any portion} of it publicly or even in a private communication. Even if you do not intend for it to be copied by another student, this counts as \emph{collusion} and is an academic misconduct offence.

\textbf{Reading} from documentation, tutorials, books, and online forums is acceptable, but copying code and passing this off as your own is an academic misconduct offence.

By submitting this coursework, you state that you fully understand and are complying with the University’s policy on Academic Integrity and Academic Misconduct. The policy can be found at: \url{https://myuni.swansea.ac.uk/academic-life/academic-misconduct}.


\newpage\section*{Changelog}\label{sec:changelog}
\begin{description}
    \item[v1.1.2 --- 6th Mar 2022] Update worksheet and wallet.cpp\newline
			- \texttt{--database} argument should be \texttt{--db} in the worksheet (Thanks Rob Wealthall)\newline
			- \texttt{Wallet::deleteEntry()} should be \texttt{Wallet::deleteCategory()} (Thanks Ali Kellaway)

    \item[v1.1.1 --- 3rd Mar 2022] Missing comments for size() and empty():\newline
			- Add missing comments for \texttt{size()} and \texttt{empty()} to \texttt{Item} and \texttt{Category} classes (Thanks Ali Kellaway)

    \item[v1.1.0 --- 3rd Mar 2022] Update test2.cpp:\newline
			- Update \emph{test2.cpp} to correctly not expect an exception (Thanks Samuel Roach)

    \item[v1.0.1 --- 28th Feb 2022] Minor fixes to framework and worksheet:\newline
			- Clarify student ID only needs to be in editable .cpp/.h files\newline
		  - Update Catch2 framework\newline
		  - Remove erroneous semicolon from 371pass.h\newline
		  - Fix building with build.bat (Windows only)

    \item[v1.0   --- 28th Feb 2022]
			Coursework released
\end{description}



\newpage\section*{About this coursework}\label{sec:about}
As a software engineer, you will often find yourself working within a team of developers, following a specification of what is being collectively built is designed via steering committee decisions or senior design architects, potentially in collaboration with clients. 

\subsection*{Learning objectives}
This coursework is designed to simulate the sorts of things you may face in an industry job. Namely, you may have to complete code, using someone else’s code as a starter. Unfortunately, decisions about how your program should work may well be made for you already. Someone else may have also selected which external libraries you can and cannot use (often corporations have sets of preferred tools). These are all realistic challenges that should not be overlooked. It can be challenging to code using someone else’s framework, and using third party libraries will require you to read documentation and even experiment with different ideas to figure out how to use them correctly. Through completing this coursework, you should develop an appreciation of how coding in industry is likely to unfold.

This coursework requires you to code according to a specification laid out in documentation and Behaviour Driven Development style (BDD) test suites. In this coursework, test suites are implemented using the \href{https://github.com/catchorg/Catch2}{Catch2 unit testing framework}. When a test suite is compiled and executed it is a rich test application that provides a great deal of automated test information about how your code is executing and where it is not adhering to the specification. As such, you will be expected to learn how to write code in C++ according to unit tests.



\subsection*{The Task: 371pass}
You will be implementing a simple application to store and manage personal data such as passwords, logins to websites, bank accounts, and credit cards. For this coursework, you will implement some basic functionality in C++ for your program to work over the command line. Your data will be saved to a single JSON file, which your program should also be able to read from.


\subsection*{Directory structure}\label{sec:cwk dir}

%You have been provided with the below directory structure. This includes starter code and documentation for the files you need to develop.



\begin{labeling}{\texttt{{\color{blue} \^{}}src/measure.[cpp|h] }}
    \item[{\color{red} *}\texttt{LICENCE}]

    Licences for the framework and libraries included

    \item[\texttt{README.md}]

    A \href{https://commonmark.org}{Markdown} file you can use to document your solution

    \item[\texttt{bin/}]

    Directory where compiled binaries are stored by default

    \item[\texttt{build.bat}]

    A Windows Batch file for compiling both 371pass and the test suite

    \item[\texttt{build.sh}]

    A Bash script for compiling both 371pass and the test suite

    \item[{\color{blue} \^{}}\texttt{database.json}]

    A sample database you can use during development

    \item[{\color{blue} \^{}}\texttt{src/371pass.[cpp|h]}]

    Files that contain your main program logic

    \item[{\color{blue} \^{}}\texttt{src/category.[cpp|h]}]

    The \texttt{Category} class, for storing \texttt{Item} objects
    
    \item[{\color{blue} \^{}}\texttt{src/item.[cpp|h]}]

    The \texttt{Item} class, for storing entries as key/pair values

    \item[{\color{red} *}\texttt{src/lib\_*.[cpp|hpp]}]

    The only permitted external libraries
    
    \item[{\color{blue} \^{}}\texttt{src/wallet.[cpp|h]}]

    The \texttt{Wallet} class, for storing \texttt{Category} objects

    \item[{\color{red} *}\texttt{src/main.cpp}]

    A simple file that calls the bootstrap code in \emph{371pass.cpp}

    \item[\texttt{tests/}]

    Directory containing a number of Catch2 BDD unit tests and JSON files used in the tests
\end{labeling}

\vspace{.5cm}
You must not modify any file/directories with an asterisk (\textbf{\color{red} *}). You only \emph{need} to modify the files with a circumflex (\textbf{\color{blue} \^{}}). Please do not create an additional files as our test scripts will miss these.


\subsection*{Automated build script and test suite}\label{sec:cwk scripts}

\emph{build.sh} and \emph{build.bat} will compile your application from the command line on your local machine. The former works with POSIX OSs, i.e., Unix (including macOS) and GNU/Linux (including virtualised installations such as those through Windows Subsystem for Linux). The latter script works with Windows Command Prompt. Both scripts build to C++14 standards and place the compiled binary in the \emph{bin/} directory as \emph{bethyw(.exe)}. You can alternatively use your own toolchain for compilation if you wish, however we will be testing your coursework with GCC on a POSIX system.

\subsubsection*{Testing your code locally}
You have been provided with a suite of test programs \emph{tests/test1.cpp}, \emph{tests/test2.cpp}, ..., \emph{tests/test9.cpp}. You can compile your program with one of these test suites by calling the build script with a single argument \texttt{testN} where \emph{\texttt{N}} is the number of the test you wish to compile (i.e., \texttt{./build.sh test1} will build your program with the test suite in \emph{tests/test1.cpp}). The compiled binary will be saved as \emph{371pass-test(.exe)} in the \emph{bin/} directory. Execute this binary to run the test. Compile your application with all tests with the command \texttt{./build.sh testall}. The same options also work for \emph{build.bat}. You can use your own IDE or build your compilation process (e.g., using make), but we cannot realistically provide support for this.

Studying these files, along with the documentation in the provided source code and this PDF, should give you an insight into how your functions should be declared and implemented. The tests should cover most of the functions you need to write, but \textbf{they do not offer complete coverage}. You are welcome to write additional tests to aid in your development. Grading your code will be done by running your coursework against the original versions of these test programs plus some additional tests.

Although you should generally get the same output with whichever compiler you use, your code will be tested using the GNU Compiler Collection 10.2.

\subsubsection*{Testing your code on Autograder}
The CS Autograder service, which is the main submission process for this module, uses GCC 10.2. You can submit your coursework up to 10 times a day up to the deadline. The service will compile and run your code against the provided unit tests. You will be able to see the results of these tests, allowing you to refine your submission. Due to the number of students on this module, it may take a while for test results to be generated. I would strongly discourage you from submitting to Autograder close to the deadline as demand will be high, and your results may arrive after the deadline (this happened last year!).



\subsection*{Program arguments}\label{sec:cwk args}
Your program must read in a series of program/command line arguments (not \texttt{stdin}!) and parse them. A library has been included that will handle and convert these values to \texttt{std::string} objects inside \emph{371pass.cpp}. You will have to write additional code in this file to fully implement the functionality described below. See \hyperref[sec:cwk outputs]{the next section} for examples of the various outputs and error messages your program should give in different situations. 

\begin{labeling}{ \texttt{--category value} }
    \item[\texttt{--db value}]
    Filename of the 371pass database (the default value \emph{database.json} is assumed if one is not provided)

    \item[\texttt{--action value}]
    For this coursework, your program needs to be able to do four things: `\emph{create}', `\emph{read}', `\emph{update}', or `\emph{delete}' categories, items, or entries. Accordingly, these are the four possible values for the \texttt{action} program argument. I recommend you focus on implementing code for when the action argument is \texttt{read} first, followed by \texttt{create}, \texttt{delete} and \texttt{update}.

    \item[\texttt{--category value}]
    Apply the action to a category, where \texttt{value} is the name of the category. Identifiers cannot be empty. The functionality of the \texttt{category} argument depends upon the value of the \texttt{action} argument:
        \begin{itemize}
    
        \item If the \texttt{action} program argument is \emph{create}, then a category should be created in the database with the identifier (often shortened to `ident') equal to the value of the \texttt{category} argument. If a category exists already with that identifier, do nothing. In both cases, your program should not output anything and return an exit code of \texttt{0}.
    
        \item If the \texttt{action} program argument is \emph{read}, and a category identifier matches the value of the \texttt{category} argument, output the data in that category as JSON to \texttt{stdout} and exit with a code of \texttt{0}. If such a category does not exist, output an error message to \texttt{stderr} and return an exit code of \texttt{1}.
    
        \item If the \texttt{action} program argument is \emph{update}, and you want to rename a category, then the category argument should be in the format \\\texttt{oldidentifier}:\texttt{newidentifier} such that your program will rename the category with identifier \texttt{oldidentifier} to \texttt{newidentifier}. If successful, your program will output nothing and return an exit code of 0. If such a category does not exist, output an error message to \texttt{stderr} and return an exit code of \texttt{1}.
    
        \item If the \texttt{action} program argument is \emph{delete} and there is a category in the database with the identifier equal to the value of the \texttt{category} argument, delete it. If successful, your program should not output anything and return an exit code of \texttt{0}. If not successful, (i.e., no category exists), output an error message to \texttt{stderr} and return an exit code of \texttt{1}.
        \end{itemize}
    
    \item[\texttt{--item value}]
    Apply the action to an item, where \texttt{value} is the identifier for the item. Identifiers cannot be empty. You must also supply the \texttt{category} argument when supplying the \texttt{item} argument (i.e., all items must be in a category). The functionality of the \texttt{category} argument depends upon the value of the \texttt{action} and \texttt{category} arguments:
        \begin{itemize}
    
        \item If the \texttt{action} program argument is \emph{create}, then an item should be created in the database with the identifier equal to the value of the \texttt{item} argument in a category specified by the \texttt{category} argument. If an item exists already with that identifier, do nothing. In both cases, your program should not output anything and exit with a code of \texttt{0}.
    
        \item If the \texttt{action} program argument is \emph{read}, and a item identifier matches the value of the \texttt{category} and \texttt{category} arguments, output the data in that item as JSON to \texttt{stdout} and exit with a code of \texttt{0}. If such an item does not exist, output an error message to \texttt{stderr} and return an exit code of \texttt{1}.
    
        \item If the \texttt{action} program argument is \emph{update}, and you want to rename an item, then the item argument should be in the format \\\texttt{oldidentifier:newidentifier} such that your program will rename the item with identifier \texttt{oldidentifier} to \texttt{newidentifier} in the category specified by the \texttt{category} argument. If successful, your program will output nothing and return an exit code of 0. If such an item does not exist, output an error message to \texttt{stderr} and return an exit code of \texttt{1}.
    
        \item If the \texttt{action} program argument is \emph{delete} and there is an item in the database with the identifier equal to the value of the \texttt{item} argument in the category specified by the \texttt{category} argument, delete it. If successful, your program should not output anything and return an exit code of \texttt{0}. If not successful, (i.e., no item exists), output an error message to \texttt{stderr} and return an exit code of \texttt{1}.
        \end{itemize}

    \item[\texttt{--entry value}]
    Apply the action to an item, where \texttt{value} contains either the key or value or both for an entry (depending on the \texttt{action} argument). Keys cannot be empty. You must also supply the \texttt{category} argument when supplying the \texttt{item} argument.  The functionality of the \texttt{category} argument depends upon the value of the \texttt{action}, \texttt{category}, and \texttt{item} arguments:
        \begin{itemize}
    
        \item If the \texttt{action} program argument is \emph{create}, then the entry argument should be in the format \texttt{name,Martin} such that an entry with the key \texttt{name} and value \texttt{Martin} be added to the item specified by the \texttt{item} argument in a category specified by the \texttt{category} argument. If such an entry exists with this key, update the value. If the entry argument contains no comma (\texttt{,}) then assume the entire argument value is the key and an empty value. In all cases, your program should not output anything and exit with a code of \texttt{0}.
    
        \item If the \texttt{action} program argument is \emph{read}, and there is an entry in the database with the key equal to the value of the \texttt{entry} argument in the item and category specified by the \texttt{item} and \texttt{category} arguments, output the value of the entry (\underline{not} in JSON format) and exit with a code of \texttt{0}. If such an entry does not exist, output an error message to \texttt{stderr} and return an exit code of \texttt{1}.
    
        \item If the \texttt{action} program argument is \emph{update}, and you want to rename an entry, then the entry argument should be in the format \texttt{name:Person} such that your program will rename the entry with key \texttt{name} to \texttt{Person} in the item and category specified by the \texttt{item} and \texttt{category} arguments. If you wish to update the value of an entry, the entry argument should be in the format \texttt{name,Albert} such that your program will update the entry with key \texttt{name} to have value \texttt{Albert}. If you wish to update the key and value of an entry, then the \texttt{entry} argument should be in the format \texttt{name:Person,Albert} such that your program will update the entry with key \texttt{name} to have key \texttt{Person} and value \texttt{Albert}. If successful, your program will output nothing and return an exit code of 0.  If such an entry does not exist, output an error message to \texttt{stderr} and return an exit code of \texttt{1}.
    
        \item If the \texttt{action} program argument is \emph{delete} and there is an entry in the database with the key equal to the value of the \texttt{entry} argument in the item and category specified by the \texttt{item} and \texttt{category} arguments, delete it. If successful, your program should not output anything and return an exit code of \texttt{0}. If not successful, (i.e., no item exists), output an error message to \texttt{stderr} and return an exit code of \texttt{1}.
        \end{itemize}
    
    \item[\texttt{-h} or \texttt{--help}]
    Output the program help information. This command has been implemented for you.
\end{labeling}

Note that as a result of the above, category and item identifiers cannot contain a colon (\texttt{:}) and entries cannot contain a colon (\texttt{:}) or a comma (\texttt{,}) in their key or value. This is simply a design limitiation and you should not worry about it. Your code will \underline{not} be tested in this situations.

\subsection*{Expected outputs}\label{sec:cwk outputs}
Below are a number of sample commands and outputs expected using the sample \texttt{database.json} file provided in the coursework framework. Ignore line breaks in the terminal output. Your program will be tested with similar commands to the below using a semi-automated process. Although these outputs are not tested by the unit tests in the \emph{tests/} directory, you are expected to ensure your program has outputs as below.

\begin{Verbatim}[formatcom=\bfseries]
$ ./bin/371pass
\end{Verbatim}
\begin{labeling}{ stdout:}
    \item[stdout:]
    \emph{empty}
    
    \item[stderr:]
    \begin{lstlisting}[backgroundcolor = \color{lightgray},belowskip=0pt]
Error: missing action argument(s).
    \end{lstlisting}
    
    \item[exit:]
    \texttt{1}
\end{labeling}

\begin{Verbatim}[formatcom=\bfseries]
$ ./bin/371pass --action 123
\end{Verbatim}
\begin{labeling}{ stdout:}
    \item[stdout:]
    \emph{empty}
    
    \item[stderr:]
    \begin{lstlisting}[backgroundcolor = \color{lightgray},belowskip=0pt]
Error: invalid action argument(s).
    \end{lstlisting}
    
    \item[exit:]
    \texttt{1}
\end{labeling}

\begin{Verbatim}[formatcom=\bfseries]
$ ./bin/371pass --action read  
\end{Verbatim}
\begin{labeling}{ stdout:}
    \item[stdout:]
    \begin{lstlisting}[backgroundcolor = \color{lightgray},belowskip=0pt]
{"Bank Accounts":{"Starling":{"Account Number":"12345678","Name":"Mr John Doe",
"Sort Code":"12-34-56"}},"Websites":{"Facebook":{"password":"pass1234fb",
"url":"https://www.facebook.com/","username":"example@outlook.com"},"Google":
{"password":"pass1234","url":"https://www.google.com/","username":
"example@outlook.com"},"Twitter":{"password":"r43rfsffdsfdsf","url":
"https://www.twitter.com/","username":"example@outlook.com"}}}
    \end{lstlisting}
    
    \item[stderr:]
    \emph{empty}
    
    \item[exit:]
    \texttt{0}
\end{labeling}

\begin{Verbatim}[formatcom=\bfseries]
$ ./bin/371pass --action read --category "Bank Accounts"
\end{Verbatim}
\begin{labeling}{ stdout:}
    \item[stdout:]
    \begin{lstlisting}[backgroundcolor = \color{lightgray},belowskip=0pt]
{"Starling":{"Account Number":"12345678","Name":"Mr John Doe","Sort Code":"12-34-56"}}
    \end{lstlisting}
    
    \item[stderr:]
    \emph{empty}
    
    \item[exit:]
    \texttt{0}
\end{labeling}

\begin{Verbatim}[formatcom=\bfseries]
$ ./bin/371pass --action read --category "Bank Accounts" --item "Starling"   
\end{Verbatim}
\begin{labeling}{ stdout:}
    \item[stdout:]
    \begin{lstlisting}[backgroundcolor = \color{lightgray},belowskip=0pt]
{"Account Number":"12345678","Name":"Mr John Doe","Sort Code":"12-34-56"}
    \end{lstlisting}
    
    \item[stderr:]
    \emph{empty}
    
    \item[exit:]
    \texttt{0}
\end{labeling}

\begin{Verbatim}[formatcom=\bfseries]
$ ./bin/371pass --action read --category "Bank Accounts" --item "Starling"
                --entry "Account Number"
\end{Verbatim}
\begin{labeling}{ stdout:}
    \item[stdout:]
    \begin{lstlisting}[backgroundcolor = \color{lightgray},belowskip=0pt]
12345678
    \end{lstlisting}
    
    \item[stderr:]
    \emph{empty}
    
    \item[exit:]
    \texttt{0}
\end{labeling}

\begin{Verbatim}[formatcom=\bfseries]
$ ./bin/371pass --action read --category "Bank Accounts" --item "Starling"
                --entry "Account"
\end{Verbatim}
\begin{labeling}{ stdout:}
    \item[stdout:]
    \emph{empty}
    
    \item[stderr:]
    \begin{lstlisting}[backgroundcolor = \color{lightgray},belowskip=0pt]
Error: invalid entry argument(s).
    \end{lstlisting}
    
    \item[exit:]
    \texttt{1}
\end{labeling}

\begin{Verbatim}[formatcom=\bfseries]
$ ./bin/371pass --action read --category "Banks" --item "Sterling"
                --entry "Account" 
\end{Verbatim}
\begin{labeling}{ stdout:}
    \item[stdout:]
    \emph{empty}
    
    \item[stderr:]
    \begin{lstlisting}[backgroundcolor = \color{lightgray},belowskip=0pt]
Error: invalid category argument(s).
    \end{lstlisting}
    
    \item[exit:]
    \texttt{1}
\end{labeling}

\begin{Verbatim}[formatcom=\bfseries]
$ ./bin/371pass --action read --entry "Account" 
\end{Verbatim}
\begin{labeling}{ stdout:}
    \item[stdout:]
    \emph{empty}
    
    \item[stderr:]
    \begin{lstlisting}[backgroundcolor = \color{lightgray},belowskip=0pt]
Error: missing category argument(s).
    \end{lstlisting}
    
    \item[exit:]
    \texttt{1}
\end{labeling}

\begin{Verbatim}[formatcom=\bfseries]
$ ./bin/371pass --action read --item "Starling" --entry "Account" 
\end{Verbatim}
\begin{labeling}{ stdout:}
    \item[stdout:]
    \emph{empty}
    
    \item[stderr:]
    \begin{lstlisting}[backgroundcolor = \color{lightgray},belowskip=0pt]
Error: missing category argument(s).
    \end{lstlisting}
    
    \item[exit:]
    \texttt{1}
\end{labeling}

\begin{Verbatim}[formatcom=\bfseries]
$ ./bin/371pass --action read --category "Bank Accounts" --entry "Account" 
\end{Verbatim}
\begin{labeling}{ stdout:}
    \item[stdout:]
    \emph{empty}
    
    \item[stderr:]
    \begin{lstlisting}[backgroundcolor = \color{lightgray},belowskip=0pt]
Error: missing item argument(s).
    \end{lstlisting}
    
    \item[exit:]
    \texttt{1}
\end{labeling}

\begin{Verbatim}[formatcom=\bfseries]
$ ./bin/371pass --action create
\end{Verbatim}
\begin{labeling}{ stdout:}
    \item[stdout:]
    \emph{empty}
    
    \item[stderr:]
    \begin{lstlisting}[backgroundcolor = \color{lightgray},belowskip=0pt]
Error: missing category, item or entry argument(s).
    \end{lstlisting}
    
    \item[exit:]
    \texttt{1}
\end{labeling}

\begin{Verbatim}[formatcom=\bfseries]
$ ./bin/371pass --action create --category "Banks" --item "Sterling"
                --entry "Account,9876543"
\end{Verbatim}
\begin{labeling}{ stdout:}
    \item[stdout:]
    \emph{empty}
    
    \item[stderr:]
    \emph{empty}
    
    \item[exit:]
    \texttt{0}
\end{labeling}

\begin{Verbatim}[formatcom=\bfseries]
$ ./bin/371pass --action update --category "Banks" --item "Sterling"
                --entry "Account,123456"
\end{Verbatim}
\begin{labeling}{ stdout:}
    \item[stdout:]
    \emph{empty}
    
    \item[stderr:]
    \emph{empty}
    
    \item[exit:]
    \texttt{0}
\end{labeling}

\begin{Verbatim}[formatcom=\bfseries]
$ ./bin/371pass --action delete --category "Banks"
\end{Verbatim}
\begin{labeling}{ stdout:}
    \item[stdout:]
    \emph{empty}
    
    \item[stderr:]
    \emph{empty}
    
    \item[exit:]
    \texttt{0}
\end{labeling}

\begin{Verbatim}[formatcom=\bfseries]
$ ./bin/371pass --action test
\end{Verbatim}
\begin{labeling}{ stdout:}
    \item[stdout:]
    \emph{empty}
    
    \item[stderr:]
    \begin{lstlisting}[backgroundcolor = \color{lightgray},belowskip=0pt]
Error: invalid action argument(s).
    \end{lstlisting}
    
    \item[exit:]
    \texttt{1}
\end{labeling}

\begin{Verbatim}[formatcom=\bfseries]
$ ./bin/371pass --action update --category "Bank Accounts" --item "Starling"
                --entry "Account Number:"
\end{Verbatim}
\begin{labeling}{ stdout:}
    \item[stdout:]
    \emph{empty}
    
    \item[stderr:]
    \begin{lstlisting}[backgroundcolor = \color{lightgray},belowskip=0pt]
Error: invalid entry argument(s).
    \end{lstlisting}
    
    \item[exit:]
    \texttt{1}
\end{labeling}

These outputs should given you an idea of the expected outputs across the program, but if you have questions, please ask on the \hyperlink{https://canvas.swansea.ac.uk/courses/24793/discussion_topics/217912}{Canvas discussion board for the coursework}.


\subsection*{External libraries included}
Three external libraries have been included in the coursework in files with a name starting with \emph{lib\_}. \textbf{These are the only external libraries you may use}. They are the \href{https://github.com/catchorg/Catch2}{Catch2 Unit testing framework}, used for the test scripts in \emph{tests/}; \href{https://github.com/jarro2783/cxxopts}{CXXOpts}, used to assist parsing the command line arguments; and \href{https://github.com/nlohmann/json}{JSON for Modern C++}, used to help you parse JSON files quickly and easily.




%
% \section*{Using Git}\label{sec:git}
% If you haven't already got Git installed on your computer, \href{https://git-scm.com/downloads}{do that}. If you have never used Git before on your system you will need to run the following commands so that commits you make can be attributed to you in the Git commit history.
% \begin{Verbatim}
% $ git config --global user.email "123456@swansea.ac.uk"
% $ git config --global user.name "YOUR NAME"
% \end{Verbatim}
%
% \subsection*{Initialising a new Git Repository}\label{sec:git init}
% From the root directory the assignment, execute \texttt{git init} to create a new Git repository in the current directory. This will create a \emph{.git/} directory where information and deltas about your commits are stored. Do not manually modify the \emph{.git/} directory. Note you will have to submit this \emph{.git/} directory with your solution. The output should be something equivalent to:
% \begin{lstlisting}[backgroundcolor = \color{lightgray}]
% Initialized empty Git repository in /Users/map/Developer/bethyw/.git/
% \end{lstlisting}
%
% We can check the state of the repository by executing \texttt{git status}. This will show the files and directories that need committing. ``Untracked'' files are files that are modified since the last commit, but that they are not currently associated with the staging of the current commit.
% \begin{lstlisting}[backgroundcolor = \color{lightgray}]
% On branch master
%
% No commits yet
%
% Untracked files:
%   (use "git add <file>..." to include in what will be committed)
%     README.md
%     datasets.h
%     main.cpp
%     src/
%     tests/
%
% nothing added to commit but untracked files present (use "git add" to track)
% \end{lstlisting}
%
% \subsection*{Staging and Executing a Git Commit}\label{sec:git commit}
% To add all changed files to the currently staged commit, execute \texttt{git add -A}. You can also execute \texttt{git add src/bethyw.cpp} or similar commands to add individual files explicitly. You do not have to add all changed files to every commit. This means if you have made changes to multiple files, but were making unrelated changes in each, that you can commit them separately over several commits so that you can describe each of the changes in more meaningful commit messages.  After staging all the files to be committed we can execute \texttt{git status} again to observe the files that will be tracked by the next commit we make:
% \begin{lstlisting}[backgroundcolor = \color{lightgray}]
% On branch master
%
% No commits yet
%
% Changes to be committed:
%   (use "git rm --cached <file>..." to unstage)
%     new file:   README.md
%     new file:   datasets.h
%     new file:   main.cpp
%     new file:   src/area.cpp
%     ...
%     new file:   tests/testall.cpp
% \end{lstlisting}
%
% To make the commit and reset the staging process so that ﬁles can be added to the next commit execute the \texttt{git commit -m "..."} command. The \texttt{-m} argument is required and should be used to provide a commit message with a meaningful description of what was changed. E.g., you could now make the commit \texttt{git commit -m "Initial commit for CSC371 coursework"}:
% \begin{lstlisting}[backgroundcolor = \color{lightgray}]
% [master (root-commit) 829a0e9] Initial commit for CSC371 coursework
%  26 files changed, 5302 insertions(+)
%  create mode 100644 README.md
%  create mode 100644 datasets.h
%  create mode 100644 main.cpp
%  create mode 100644 src/area.cpp
%  ...
%  create mode 100644 tests/testall.cpp
% \end{lstlisting}
%
% Verify the commit was successful by checking that \texttt{git status} returns clean. Once you have made changes to any of the files \texttt{git status} will report that there are changes to be committed.
% \begin{lstlisting}[backgroundcolor = \color{lightgray}]
% On branch master
% nothing to commit, working tree clean
% \end{lstlisting}



\section*{Completing this coursework}\label{sec:tasks}

Below is an abbreviated list of tasks you need to complete, designed to help you structure your progress. The source files provided include extensive comments that explain each function. The test suite is written such that it provides an explanation for all inputs and outputs for each test.

Note, even if you do not complete the entire coursework, it is still possible to score very well on the coursework. I strongly encourage you to focus on producing good, clean, safe code for some of the tasks than sloppy code for all of them (the latter will potentially lead to a lower mark!).


\subsection*{1. Add your student number}\label{sec:tasks student-num}
Before you do anything else, you need to add your student number to the various files. In \emph{371pass.h}, edit the \texttt{const} \texttt{STUDENT\_NUMBER} and in \hyperref[sec:cwk dir]{all .cpp/.h files above with the circumflex}, edit the initial block comment, replacing \texttt{<STUDENT NUMBER>} with your student ID number.



\subsection*{2. Examine the documentation fully}\label{sec:tasks documentation}
Don't try to simply jump into programming this coursework. Good software development requires developers to think through what they are going to program first. Read the guidance on how the program arguments should work and the actions that should be taken with each one. Read the comments and provided code in the various \emph{.h} and \emph{.cpp} files in the \emph{src/} directory and think of how you are going to modify these files to accomplish this task.



\subsection*{3. Write just enough code to pass the first test}\label{sec:tasks first-test}
Next, look through the test scripts, understand what is happening. The test scripts are designed so that you can follow them through logically. Try compiling and running your code with the first test script (\emph{tests/test1.cpp}) and observe the output. This test script compiles, but when you run it your test fails.

The first test relates to the action program argument and determines whether your implementation of the \texttt{parseActionArgument()} function in the \texttt{App} namespace (found in \emph{371pass.h/cpp}) can convert the string representation passed in from the command line argument into a valid of the \texttt{Action} enum (\emph{371pass.h} includes a description of this enum) or throws an exception.

Look at this function's existing implementation and modify it to pass the test. Once your test passes, think: are there other edge cases not covered by this test? Could this be done more efficiently? Is this the most elegant solution? If so, improve the correctness and efficiency of your code.


\subsection*{4. Passing the other tests}\label{sec:tasks more-tests}
Once you have satisfied yourself that your implementation of \texttt{parseActionArgument()} is correct and done well, move on to the next test script. Remember, marks are awarded in this coursework for both correctness and style. 

For the additional tests, the test may not even compile---this is because the test calls functions that are not yet implemented. You will need to read the test file to see which ones fail. Reading the test script is very useful in understanding how the function should work. In the various \emph{.cpp} files in the \emph{src/} directory, there are \texttt{TODO} comments that describe each function you must implement.


\subsection*{5. Write code not covered by the tests}\label{sec:tasks untested-code}
Some functions do not have unit tests that cover them, and some functionality of your program may not be tested by the provided tests. Once you have passed the tests, continue to look through your code in the \emph{src/} directory and ensure you have implemented every function and feature that has been requested. 


\subsection*{6. Edit, edit, edit!}\label{sec:tasks edit}
Every book you've read, every set of lecture slides you've glanced over, and every program's source code you've used have all been \emph{edited}. Very few programs are perfect first time—look over your code, think through if you're doing things the right way. Read the documentation again and decide whether your code meets what is expected. Write additional tests, or try out different program arguments. For many of you, this will be one of the last pieces of software you write in your degree, and at this point, you should have an appreciation for programming as a craft.



\section*{Submission instructions}
You should modify the \texttt{README} file in this directory to concisely explain any of the known caveats or issues with your implementation that you would like to be known during marking.

You must submit your code to \submissionlink{} before the deadline. Autograder only accepts specific files and will ignore any unneeded files. Autograder does not accept directories or ZIP files—you must upload your .cpp and .h files and your README.md file. 

\textbf{Please test that Autograder works for you now} by uploading the coursework framework. Some users occasionally encounter system errors with Autograder that seem to be caused by cookies. If this happens to you, try logging into Autograder in a private browsing/incognito window. Autograder is the only submission mechanism and you have ample time to test this before the deadline. 

All submissions to Autograder count as coursework submissions, thus for each submission, you must comply with the University’s policy on Academic Integrity and Academic Misconduct (even if you later replace this submission with a new version).


%You may resubmit to the Canvas assignment an unlimited number of times before the deadline. Please re-upload often as you complete additional parts of the coursework. In the past, people have only made one submission very close to the deadline. If you do not make any submissions up until very close to the deadline and there is a problem (e.g. even a momentary drop of your Internet connection) you could miss the submission deadline.


\section*{Grading criteria}
The assignment is graded out of 100 marks:

\noindent{}\textbf{20 marks} are awarded for successfully passing automated unit tests provided in the \emph{tests/} directory. You can see the result of your code against these tests on \href{\mysubmissionsurl}{the `My Submissions' on CS Autograder}. The output of the Catch2 test is visible if you expand each test.

\noindent{}\textbf{15 marks} are awarded for successfully passing automated output tests provided through \autograderlink{}. You can see the result of your code against these tests on \href{\mysubmissionsurl}{the `My Submissions' on CS Autograder}. The output of your program and the expected output is visible if you expand each test. Due to a limitation in the design of autograder, marks for automated output tests are not shown (each output test is 1 mark).

\noindent{}\textbf{30 marks} are awarded for successfully passing additional automated tests, which have not been provided. These tests include greater coverage of your program, and test for things described in the framework comments, but not necessarily tested in the provided test suite.

\noindent{}\textbf{35 marks} are for good coding practice, and awarded in independently of the completeness marks above. You must produce clean, concise, and readable code. These marks are awarded in a negative marking approach (i.e., you lose marks for bad coding practice) as by now, you should always be working towards good coding standards. A non-exhaustive list of things that will you will lose marks for:
\begin{itemize}
    \item Code that compiles with any warnings in GCC (e.g., using the \texttt{-pedantic} and \texttt{-Wall} flags)

    \item Poor or inconsistent choice of variable names (e.g., \hyperlink{https://en.wikipedia.org/wiki/Variable_shadowing}{shadowing variables}), or poorly formatted, non-indented, or incorrectly structured code

    \item Excessive or non-existent use of commenting. Use comments to highlight code you have written, or code which may not have an obvious meaning. This can help the marker identify places to award marks. You should assume the marker knows C++, so do not need to comment obvious code.

    \item Code that is inefficient/requires excessive computation including using `\texttt{using namespace std}'

    \item Incorrect or missing usage of \texttt{const} keyword for parameter types, return types, and member function declarations

        \begin{itemize}
            \item Or using a cast to remove a qualifier such as \texttt{const} 
    \end{itemize}

    \item Incorrect or unsafe use of pointers and references, or unsafe memory management
    % \begin{itemize}
    %     \item Code will be executed using \href{https://valgrind.org}{Valgrind} during grading to check for memory consistency
    % \end{itemize}

    \item Unneeded duplication of computation or use of redundant code or variables

    \item Producing code that is at-risk of throwing uncaught or unexpected exceptions

    \item Not including all functions as prototypes in header files

    \item Removal, reordering, or not using the block comments present in the provided files

        \begin{itemize}
            \item These comments are as much to help you understand the specification as they are to help grade your work efficiently
            \item It is infeasible to grade 160 assignments unless they are consistently formatted and each part of your implementation can be found predictably
    \end{itemize}

\end{itemize}

You may gain marks for designing your implementation well, making good use of the Standard Library, and adding additional functionality to your programs beyond the specification, but be careful not to break any of the existing tests.


\end{document}